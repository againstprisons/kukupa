.case-task-add{'data-case-id': case_obj.id}
  %h1= title

  .inline-form
    %a.pure-button.button{href: url("/case/#{case_obj.id}/view")}
      %i.fa.fa-chevron-left= ""
      %span
        = t(:'back')

  %form.pure-form.pure-form-stacked.form-main{method: 'POST'}
    %input{type: 'hidden', name: '_csrf', value: session[:csrf]}
    %h1= t(:'case/task/add/section_title')

    %label{for: 'description'}
      = t(:'case/task/add/content_field')
      %span.badge= t(:'required')
    %input#description{name: 'content', type: 'text', required: true, placeholder: t(:'case/task/add/content_field')}

    %label{for: 'assignee'}
      = t(:'case/task/add/assignee_field')
      %span.badge= t(:'required')
    %select#assignee{name: 'assignee', required: true}
      - case_accessors_grouped.each do |tag, users|
        %option{value: '-1', disabled: true}
          = precede '🏷️ ' do
            = t("tag/#{tag}".to_sym)

        - users.each do |u|
          %option{value: u[:id], selected: u[:me]}
            = precede '&emsp;&emsp;' do
              &= u[:name] || "User ID #{u[:id]}"

    %label{for: 'deadline'}
      = t(:'case/task/add/deadline_field')
      %span.badge= t(:'required')
    %input#deadline{type: 'date', name: 'deadline', required: true, value: default_deadline.strftime('%Y-%m-%d')}

    %button.pure-button.button.button-primary{type: 'submit'}
      %i.fa.fa-pencil-square-o= ""
      = t(:'case/task/add/submit')
